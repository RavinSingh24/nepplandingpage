<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>User Profile - NEPP</title>
  <link rel="icon" href="../images/logo.png" type="image/png">
  <link rel="stylesheet" href="../css/styles.css">
  <link rel="stylesheet" href="../css/profile.css">
  <link rel="stylesheet" href="../css/user-profile.css">
</head>
<body>
  <div class="nepp-root">
    <aside class="sidebar"></aside>

    <main class="main-content">
      <div class="profile-header">
        <h1 id="pageTitle">User Profile</h1>
        <p class="profile-subtitle" id="profileSubtitle">View user information and activity</p>
      </div>

      <div class="profile-container">
        <div class="profile-section">
          <div class="profile-avatar-section">
            <div class="profile-avatar">
              <div class="avatar-large" id="profileAvatar">
                <img id="profileImage" src="" alt="Profile" style="display: none; width: 100%; height: 100%; border-radius: 50%; object-fit: cover;">
                <span id="profileInitial">?</span>
              </div>
            </div>
            <div class="profile-info">
              <h2 id="profileDisplayName">Loading...</h2>
              <p id="profileEmail">Loading...</p>
              <p class="profile-member-since">Member since <span id="memberSince">Loading...</span></p>
              <div class="profile-bio" id="profileBio" style="margin-top: 1rem; color: #8892b0; display: none;">
                <!-- Bio will be displayed here if available -->
              </div>
            </div>
          </div>
        </div>

        <div class="profile-sections">
          <div class="profile-section">
            <h3>Public Statistics</h3>
            <div class="stats-grid">
              <div class="stat-card">
                <div class="stat-number" id="formsCreated">0</div>
                <div class="stat-label">Public Forms Created</div>
              </div>
              <div class="stat-card">
                <div class="stat-number" id="groupsJoined">0</div>
                <div class="stat-label">Groups Joined</div>
              </div>
              <div class="stat-card">
                <div class="stat-number" id="responsesSubmitted">0</div>
                <div class="stat-label">Responses Submitted</div>
              </div>
              <div class="stat-card">
                <div class="stat-number" id="daysActive">0</div>
                <div class="stat-label">Days Active</div>
              </div>
            </div>
          </div>

          <div class="profile-section">
            <h3>Recent Public Activity</h3>
            <div class="activity-list" id="recentActivity">
              <div class="loading-state">Loading recent activity...</div>
            </div>
          </div>

          <div class="profile-section">
            <h3>Groups</h3>
            <div class="groups-list" id="userGroups">
              <div class="loading-state">Loading groups...</div>
            </div>
          </div>

          <!-- Contact/Actions Section -->
          <div class="profile-section">
            <h3>Actions</h3>
            <div class="profile-actions">
              <button class="action-btn" id="sendMessageBtn" style="display: none;">
                <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="size-5">
                  <path stroke-linecap="round" stroke-linejoin="round" d="M21.75 6.75v10.5a2.25 2.25 0 01-2.25 2.25h-15a2.25 2.25 0 01-2.25-2.25V6.75m19.5 0A2.25 2.25 0 0019.5 4.5h-15a2.25 2.25 0 00-2.25 2.25m19.5 0v.243a2.25 2.25 0 01-1.07 1.916l-7.5 4.615a2.25 2.25 0 01-2.36 0L3.32 8.91a2.25 2.25 0 01-1.07-1.916V6.75" />
                </svg>
                Send Message
              </button>
              <button class="action-btn" id="viewFormsBtn">
                <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="size-5">
                  <path stroke-linecap="round" stroke-linejoin="round" d="M19.5 14.25v-2.625a3.375 3.375 0 00-3.375-3.375h-9.75a3.375 3.375 0 00-3.375 3.375v2.625m15 0a3.375 3.375 0 013.375 3.375v2.625a3.375 3.375 0 01-3.375 3.375h-15.75a3.375 3.375 0 01-3.375-3.375v-2.625m15 0v-2.625a3.375 3.375 0 00-3.375-3.375h-9.75a3.375 3.375 0 00-3.375 3.375v2.625m15 0h2.25" />
                </svg>
                View Public Forms
              </button>
            </div>
          </div>
        </div>
      </div>

      <!-- Error message for invalid users -->
      <div class="error-container" id="errorContainer" style="display: none;">
        <div class="error-content">
          <h2>User Not Found</h2>
          <p>The user profile you're looking for doesn't exist or isn't public.</p>
          <button class="action-btn" onclick="window.history.back()">Go Back</button>
        </div>
      </div>
    </main>
  </div>
  
  <script type="module" src="/config/firebase-config.js"></script>
  <script type="module" src="/components/sidebar.js"></script>
  <script type="module" src="../js/user-profile.js"></script>
</body>
</html>
